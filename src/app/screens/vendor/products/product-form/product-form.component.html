<div class="container-scroll-y p-4">
  <div class="pb-3"><eu-icon-title></eu-icon-title></div>
  <div class="card d-flex flex-column border-0">
    <form
      class="row p-3"
      [formGroup]="formGroup"
      (ngSubmit)="
        formGroup.invalid ? formGroup.markAllAsTouched() : onSaveOrUpdate()
      "
    >
      <div class="col-12 p-0">
        <div class="form-group col-sm-12 col-xl-4">
          <mat-form-field class="w-100">
            <mat-label>Búscar comercio</mat-label>
            <input
              formControlName="commerce"
              matInput
              type="text"
              [matAutocomplete]="commerceAuto"
            />
            <mat-autocomplete
              autoActiveFirstOption
              #commerceAuto="matAutocomplete"
              [displayWith]="displayCommerceName"
            >
              <mat-option
                *ngFor="let commerce of filteredCommeces$ | async"
                [value]="commerce"
              >
                {{ commerce.id }} {{ commerce.name }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
        </div>
      </div>
      <div class="form-group col-sm-12 col-xl-4">
        <input
          class="form-control"
          formControlName="name"
          placeholder="Nombre"
          (blur)="formGroup.controls.name.markAsTouched()"
        />
      </div>
      <div class="form-group col-sm-12 col-xl-4">
        <input
          class="form-control input-number"
          formControlName="price"
          placeholder="Precio"
          type="number"
          (blur)="formGroup.controls.price.markAsTouched()"
        />
      </div>
      <div class="form-group col-sm-12 col-xl-4">
        <select
          class="form-control w-100"
          formControlName="section"
          (blur)="formGroup.controls.section.markAsTouched()"
        >
          <option [value]="null" disabled selected>
            Seleccione una sección
          </option>
          <option
            [value]="section"
            *ngFor="
              let section of formGroup.controls.commerce?.value
                ? formGroup.controls.commerce?.value.sections
                : []
            "
          >
            {{ section }}
          </option>
        </select>
      </div>
      <div class="form-group col-12">
        <textarea
          class="form-control"
          formControlName="description"
          placeholder="Dirección..."
        ></textarea>
      </div>
      <div class="d-flex flex-row w-100 justifu-content-center px-3">
        <button
          type="submit"
          class="btn btn-primary btn-rounded m-auto col-sm-12 col-xl-4"
        >
          Agregar
        </button>
      </div>
    </form>
  </div>
</div>
